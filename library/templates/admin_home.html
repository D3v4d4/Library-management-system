{% extends 'navigation.html' %}
{% load static %}

{% block title %}Dashboard | Library Management System{% endblock %}

{% block body %}
<style>
  .metric-card{
    border:0; border-radius:18px; box-shadow:0 12px 30px rgba(2,6,23,.10);
    transition:transform .18s ease, box-shadow .18s ease; background:#fff;
  }
  .metric-card:hover{ transform:translateY(-4px); box-shadow:0 16px 36px rgba(2,6,23,.16); }
  .metric-icon{
    width:64px; height:64px; border-radius:14px; display:grid; place-items:center;
    background: rgba(14,165,164,.12); color: var(--brand-primary, #0ea5a4); font-size:1.6rem;
  }
  .metric-label{ font-weight:600; color:#334155; }
  .metric-value{ font-size:2.25rem; line-height:1; font-weight:800; color:#0f172a; }

  /* Banner */
  .lm-banner{ position:relative; border-radius:18px; overflow:hidden; box-shadow:0 12px 30px rgba(2,6,23,.10); }
  .lm-banner img{ width:100%; height:280px; object-fit:cover; display:block; }
  .lm-banner .overlay{ position:absolute; inset:0; background:linear-gradient(to right, rgba(2,6,23,.65), rgba(2,6,23,.25), rgba(0,0,0,0)); }
  .lm-banner .caption{ position:absolute; left:20px; top:50%; transform:translateY(-50%); color:#fff; max-width:60%; }
  .lm-banner .caption h3{ margin:0 0 .25rem 0; }
  .lm-banner .caption p{ margin:0 0 .75rem 0; opacity:.9; }
</style>

<div class="container py-4">
  <!-- Metric Cards -->
  <div class="row g-4">
    <div class="col-12 col-md-6">
      <a href="{% url 'viewstudent' %}" class="text-decoration-none">
        <div class="card metric-card h-100">
          <div class="card-body d-flex align-items-center gap-3">
            <div class="metric-icon"><i class="fa-solid fa-user-graduate"></i></div>
            <div class="flex-grow-1">
              <div class="metric-label">Total Students</div>
              <div class="metric-value">{{ studentcount }}</div>
            </div>
            <i class="fa-solid fa-arrow-right-long text-muted"></i>
          </div>
        </div>
      </a>
    </div>

    <div class="col-12 col-md-6">
      <a href="{% url 'viewbook' %}" class="text-decoration-none">
        <div class="card metric-card h-100">
          <div class="card-body d-flex align-items-center gap-3">
            <div class="metric-icon"><i class="fa-solid fa-book"></i></div>
            <div class="flex-grow-1">
              <div class="metric-label">Total Books</div>
              <div class="metric-value">{{ bookcount }}</div>
            </div>
            <i class="fa-solid fa-arrow-right-long text-muted"></i>
          </div>
        </div>
      </a>
    </div>
  </div>

  <!-- Banner / Content Below -->
  <div class="row g-4 mt-2">
    <div class="col-12">
      <div class="lm-banner">
        <!-- Apni image yahan rakho; file na ho to naam change kar lo -->
        <img src="{% static 'images/700547-library-background-image-.jpg' %}" alt="Library shelves">
        <div class="overlay"></div>
        <div class="caption">
          <h3>Welcome to Library Management System</h3>
          <p>Discover • Borrow • Track — streamlined for your institute.</p>
          <div class="d-flex flex-wrap gap-2">
            <a href="{% url 'viewbook' %}" class="btn btn-brand btn-sm">
              <i class="fa-solid fa-magnifying-glass me-1"></i> Browse Books
            </a>
            <a href="{% url 'viewstudent' %}" class="btn btn-outline-light btn-sm">
              <i class="fa-solid fa-id-card-clip me-1"></i> Manage Students
            </a>
            {% url 'issuebook' as issue_url %}
            {% if issue_url %}
              <a href="{{ issue_url }}" class="btn btn-outline-light btn-sm">
                <i class="fa-solid fa-file-circle-plus me-1"></i> Issue New Book
              </a>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
